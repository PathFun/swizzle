<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      自定义组件（widget） | swizzle
    </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/swizzle/assets/style.7f0107f0.css">
    <link rel="modulepreload" href="/swizzle/assets/plugin-vue_export-helper.3a7fc118.js">
    <link rel="modulepreload" href="/swizzle/assets/Home.e01b723a.js">
    <link rel="modulepreload" href="/swizzle/assets/AlgoliaSearchBox.b14000ac.js">
    <link rel="modulepreload" href="/swizzle/assets/form-render-vue.es.914db840.js">
    <link rel="modulepreload" href="/swizzle/assets/form-render-vue_advanced_widget_index.md.7f169bf8.lean.js">
    <link rel="modulepreload" href="/swizzle/assets/app.56b881f2.js">
    <meta name="keywords" content="vue swizzle design components">
    <meta name="description" content="基于vue3.0开发的swizzle组件库">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-33b2da5a><div class="sidebar-button" data-v-33b2da5a><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/swizzle/" aria-label="swizzle, back to home" data-v-33b2da5a data-v-74be2d57><!----> swizzle</a><div class="flex-grow" data-v-33b2da5a></div><div class="nav" data-v-33b2da5a><nav class="nav-links" data-v-33b2da5a data-v-46905c02><!--[--><div class="item" data-v-46905c02><div class="nav-link" data-v-46905c02 data-v-f6252dde><a class="item active" href="/swizzle/form-render-vue/start/" data-v-f6252dde>FormRenderVue <!----></a></div></div><div class="item" data-v-46905c02><div class="nav-link" data-v-46905c02 data-v-f6252dde><a class="item" href="/swizzle/parse-chart/start/" data-v-f6252dde>ParseChart <!----></a></div></div><div class="item" data-v-46905c02><div class="nav-link" data-v-46905c02 data-v-f6252dde><a class="item isExternal" href="https://github.com/PathFun/swizzle.git" target="_blank" rel="noopener noreferrer" data-v-f6252dde>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-f6252dde><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><div class="item" data-v-46905c02><div class="nav-dropdown-link" data-v-46905c02 data-v-09ac5408><button class="button" data-v-09ac5408><span class="button-text" data-v-09ac5408>语言</span><span class="right button-arrow" data-v-09ac5408></span></button><ul class="dialog" data-v-09ac5408><!--[--><li class="dialog-item" data-v-09ac5408><div class="nav-dropdown-link-item" data-v-09ac5408 data-v-230bcec6><a class="item" href="/swizzle/form-render-vue/advanced/widget/index.html" data-v-230bcec6><span class="arrow" data-v-230bcec6></span><span class="text" data-v-230bcec6>中文</span><span class="icon" data-v-230bcec6><!----></span></a></div></li><li class="dialog-item" data-v-09ac5408><div class="nav-dropdown-link-item" data-v-09ac5408 data-v-230bcec6><a class="item" href="/swizzle/en/form-render-vue/advanced/widget/index.html" data-v-230bcec6><span class="arrow" data-v-230bcec6></span><span class="text" data-v-230bcec6>English</span><span class="icon" data-v-230bcec6><!----></span></a></div></li><!--]--></ul></div></div><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><!--[--><aside class="sidebar hover-scrollbar" data-v-509f3b00><nav class="nav-links nav" data-v-509f3b00 data-v-46905c02><!--[--><div class="item" data-v-46905c02><div class="nav-link" data-v-46905c02 data-v-f6252dde><a class="item active" href="/swizzle/form-render-vue/start/" data-v-f6252dde>FormRenderVue <!----></a></div></div><div class="item" data-v-46905c02><div class="nav-link" data-v-46905c02 data-v-f6252dde><a class="item" href="/swizzle/parse-chart/start/" data-v-f6252dde>ParseChart <!----></a></div></div><div class="item" data-v-46905c02><div class="nav-link" data-v-46905c02 data-v-f6252dde><a class="item isExternal" href="https://github.com/PathFun/swizzle.git" target="_blank" rel="noopener noreferrer" data-v-f6252dde>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-f6252dde><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><div class="item" data-v-46905c02><div class="nav-dropdown-link" data-v-46905c02 data-v-09ac5408><button class="button" data-v-09ac5408><span class="button-text" data-v-09ac5408>语言</span><span class="right button-arrow" data-v-09ac5408></span></button><ul class="dialog" data-v-09ac5408><!--[--><li class="dialog-item" data-v-09ac5408><div class="nav-dropdown-link-item" data-v-09ac5408 data-v-230bcec6><a class="item" href="/swizzle/form-render-vue/advanced/widget/index.html" data-v-230bcec6><span class="arrow" data-v-230bcec6></span><span class="text" data-v-230bcec6>中文</span><span class="icon" data-v-230bcec6><!----></span></a></div></li><li class="dialog-item" data-v-09ac5408><div class="nav-dropdown-link-item" data-v-09ac5408 data-v-230bcec6><a class="item" href="/swizzle/en/form-render-vue/advanced/widget/index.html" data-v-230bcec6><span class="arrow" data-v-230bcec6></span><span class="text" data-v-230bcec6>English</span><span class="icon" data-v-230bcec6><!----></span></a></div></li><!--]--></ul></div></div><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-509f3b00><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/start/">开始使用</a><!----></li><li class="sidebar-link"><p class="sidebar-link-item">协议(schema)</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/agree/schema/">schema 规范</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/agree/rules/">rules(校验)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/agree/props/">props</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/agree/inner-widget/">内置组件</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">高级用法</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/advanced/linkage/">表单联动</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/swizzle/form-render-vue/advanced/widget/">自定义组件（widget）</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/advanced/methods/">表单方法（form）</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/advanced/watch/">表单监听（watch）</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/advanced/display/">展示的最佳实践</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/swizzle/form-render-vue/faq/">常见问题</a><!----></li><!--]--></ul><!--[--><!--]--></aside><ul class="right-slug" data-v-509f3b00 data-v-1336cdc6><!--[--><li class="slug-item level-1" data-v-1336cdc6><a href="#使用" class="link" data-v-1336cdc6>使用</a></li><li class="slug-item level-1" data-v-1336cdc6><a href="#不需要自己手写自定义组件哦" class="link" data-v-1336cdc6>不需要自己手写自定义组件哦</a></li><li class="slug-item level-1" data-v-1336cdc6><a href="#自定义组件收到的-props" class="link" data-v-1336cdc6>自定义组件收到的 props</a></li><li class="slug-item level-1" data-v-1336cdc6><a href="#antd-组件改造成自定义组件" class="link" data-v-1336cdc6>antd 组件改造成自定义组件</a></li><li class="slug-item level-1" data-v-1336cdc6><a href="#只读模式下的自定义组件" class="link" data-v-1336cdc6>只读模式下的自定义组件</a></li><li class="slug-item level-1" data-v-1336cdc6><a href="#最佳实践" class="link" data-v-1336cdc6>最佳实践</a></li><li class="slug-item level-1" data-v-1336cdc6><a href="#内置组件" class="link" data-v-1336cdc6>内置组件</a></li><!--]--></ul><!--]--><div class="sidebar-mask"></div><main class="page" data-v-a901e69a><div class="container hover-scrollbar" data-v-a901e69a><!--[--><!--]--><div class="content" data-v-a901e69a><div data-v-a901e69a><div style="margin:24px 0;"></div><h1 id="自定义组件（widget）"><a class="header-anchor" href="#自定义组件（widget）" aria-hidden="true">#</a> 自定义组件（widget）</h1><p>当 FormRender 提供的组件无法 100%满足用户需求时，可以考虑自己写一个。自定义组件功能使 FormRender 拥有很好扩展性，可能的应用场景如下：</p><ul><li>我需要写一个异步加载的搜索输入框（普适性不高/难以用 schema 描述的组件）</li><li>我们团队使用 xxx ui，与 antd 不搭，希望能适配一套 xxx ui 组件的 FormRender（欢迎 Pull Request）</li><li>我需要在表单内部写一个 excel 上传按钮（完全定制化的需求）</li></ul><p>注：如果是新增一个常用组件，建议给 FormRender 维护的同学来提 Pull Request，这样可以更好扩展其生态，FormRender 的社区以及提供了部分 <a href="https://github.com/alibaba/x-render/tree/master/widgets" target="_blank" rel="noopener noreferrer">常用自定义组件</a>。</p><h3 id="使用"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h3><p>简单的说，在 Form 组件层使用 widgets 字段注册自定义组件，并在 schema 内使用 widget 字段指明使用的组件 key 值即可：</p><div class="language-js"><pre><code><span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">string</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;网址输入自定义组件&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">widget</span><span class="token operator">:</span> <span class="token string">&#39;site&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>Form
  <span class="token operator">:</span>schema<span class="token operator">=</span><span class="token string">&quot;schema&quot;</span>
  <span class="token operator">:</span>widgets<span class="token operator">=</span><span class="token string">&quot;{ site: SiteInput }&quot;</span>
<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>实际代码如下：</p><p><!----></p><h3 id="不需要自己手写自定义组件哦"><a class="header-anchor" href="#不需要自己手写自定义组件哦" aria-hidden="true">#</a> 不需要自己手写自定义组件哦</h3><p>自定义组件就是普通的 vue 组件，唯一的要求是要有 value/onChange 这两个 props，用于双向绑定值。所以如果现成的组件已经默认使用了 value/onChange，就可以直接拿来用。</p><p>举例来说：现在我们需要使用“级联选择”组件，FormRender 并没有内置支持。这时打开 <a href="https://antdv.com/components/cascader-cn/" target="_blank" rel="noopener noreferrer">antd 文档</a>，我们看到 cascader 默认使用了 value/onChange，那就直接拿来用吧：</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Cascader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;ant-design-vue&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// 顶层引入注册</span>
<span class="token operator">...</span>
<span class="token operator">&lt;</span>Form
  <span class="token operator">:</span>form<span class="token operator">=</span><span class="token string">&quot;form&quot;</span>
  <span class="token operator">:</span>schema<span class="token operator">=</span><span class="token string">&quot;schema&quot;</span>
  <span class="token operator">:</span>widgets<span class="token operator">=</span><span class="token string">&quot;{ cascader: Cascader }&quot;</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// schema 中使用</span>
<span class="token literal-property property">location</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;省市区&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">widget</span><span class="token operator">:</span> <span class="token string">&#39;cascader&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="自定义组件收到的-props"><a class="header-anchor" href="#自定义组件收到的-props" aria-hidden="true">#</a> 自定义组件收到的 props</h3><p>使用自定义组件时，大多有复杂定制需求，FormRender 提供了丰富的 props：</p><ul><li><strong>disabled</strong>：是否禁止输入</li><li><strong>readOnly</strong>：是否只读</li><li><strong>value</strong>：组件现在的值</li><li><strong>onChange</strong>：函数，接收 value 为入参，用于将自定义组件的返回值同步给 Form</li><li><strong>schema</strong>：组件对应的子 schema</li></ul><p>addons 上挂着几乎所有的 form 方法：</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  setValueByPath<span class="token punctuation">,</span> <span class="token comment">// (path, value) =&gt; void</span>
  getSchemaByPath<span class="token punctuation">,</span> <span class="token comment">// (path) =&gt; schema</span>
  setSchemaByPath<span class="token punctuation">,</span> <span class="token comment">// (path) =&gt; void</span>
  setSchema<span class="token punctuation">,</span> <span class="token comment">// ({path1: schema1, path2: schema2}) =&gt; void</span>
  setValues<span class="token punctuation">,</span> <span class="token comment">// (newData) =&gt; void</span>
  getValues<span class="token punctuation">,</span> <span class="token comment">// () =&gt; formData</span>
  resetFields<span class="token punctuation">,</span> <span class="token comment">// () =&gt; void</span>
  setErrorFields<span class="token punctuation">,</span> <span class="token comment">// (errors) =&gt; void</span>
  removeErrorField<span class="token punctuation">,</span> <span class="token comment">// () =&gt; void</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> addons<span class="token punctuation">;</span>
</code></pre></div><p>详见<a href="/form-render-vue/start/">开始使用</a>的“form 方法”</p><ul><li><strong>addons.dataPath</strong>: 目前数据所在的 path，例如&quot;a.b[2].c[0].d&quot;，string 类型。</li><li><strong>addons.dataIndex</strong>: 如果 dataPath 不包含数组，则为 [], 如果 dataPath 包含数组，例如&quot;a.b[2].c[0].d&quot;，则为 [2,0]。是自上到下所有经过的数组的 index 按顺序存放的一个数组类型</li><li><strong>addons.dependValues</strong>: 当自定义组件对应的 schema 使用到 dependencies 字段时，在此获得 dependencies 对应的表单项的实时的值</li></ul><h3 id="antd-组件改造成自定义组件"><a class="header-anchor" href="#antd-组件改造成自定义组件" aria-hidden="true">#</a> antd 组件改造成自定义组件</h3><p>大多数情况下，antd 的组件可以拿来即用。但有时组件的 props 并不是约定的 value/onChange, 例如 Checkbox 的情况，value 值对应的是 checked，此时只需要少量改动即可：</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Checkbox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;ant-design-vue&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyCheckBox</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Checkbox</span></span> <span class="token attr-name">checked</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="只读模式下的自定义组件"><a class="header-anchor" href="#只读模式下的自定义组件" aria-hidden="true">#</a> 只读模式下的自定义组件</h3><p>只读模式下，默认会渲染内置的 html 组件，但有时 html 组件并不能满足一个自定义组件在只读模式下需要的展示，此时可使用<code>readOnlyWidget</code>字段来指定只读模式下的展示。</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;string&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;网址输入自定义组件&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;widget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;site&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;readOnlyWidget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;siteText&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果你打算在一个自定义组件里通过 readOnly 参数判断条件展示，既是说，site 组件已经写了只读和非只读情况下的渲染</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">SiteInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> readOnly<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>readOnly<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.com</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Input addonBefore<span class="token operator">=</span><span class="token string">&quot;https://&quot;</span> addonAfter<span class="token operator">=</span><span class="token string">&quot;.com&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>此时可以指定 <code>readOnlyWidget</code> 和 <code>widget</code> 为同一个组件：</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;string&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;网址输入自定义组件&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;widget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;site&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;readOnlyWidget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;site&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="最佳实践"><a class="header-anchor" href="#最佳实践" aria-hidden="true">#</a> 最佳实践</h3><p>同一个项目下不同的 form 里，使用到的自定义组件可能大致相同，但也有可能互相不同，笔者建议是中心化一个 Form 组件，并一次性将所有需要的自定义组件注入其中。在项目的各处引入对应组件：</p><div class="language-jsx"><pre><code><span class="token comment">// jsx</span>
<span class="token keyword">import</span> Form <span class="token keyword">from</span> <span class="token string">&#39;form-render-vue3&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Cascade <span class="token keyword">from</span> <span class="token string">&#39;./Cascade&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Percentage <span class="token keyword">from</span> <span class="token string">&#39;./Percentage&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MyCheckBox <span class="token keyword">from</span> <span class="token string">&#39;./MyCheckBox&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ExcelUploader <span class="token keyword">from</span> <span class="token string">&#39;./ExcelUploader&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">FormRender</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span>
      <span class="token attr-name">widgets</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token literal-property property">percentage</span><span class="token operator">:</span> Percentage<span class="token punctuation">,</span>
        <span class="token literal-property property">cascade</span><span class="token operator">:</span> Cascade<span class="token punctuation">,</span>
        <span class="token literal-property property">myCheck</span><span class="token operator">:</span> MyCheckBox<span class="token punctuation">,</span>
        <span class="token literal-property property">excelUpload</span><span class="token operator">:</span> ExcelUploader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然后在每个 form 页面统一引入使用</p><div class="language-jsx"><pre><code><span class="token comment">// jsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;form-render-vue3&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> FormRender <span class="token keyword">from</span> <span class="token string">&#39;./Component/FormRender&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Demo1</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormRender</span></span> <span class="token attr-name">form</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span></span> <span class="token attr-name">onFinish</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="内置组件"><a class="header-anchor" href="#内置组件" aria-hidden="true">#</a> 内置组件</h3><p>使用自定义组件前，也许已经有内置组件支持。具体见 <a href="/form-render-vue/agree/inner-widget/">schema 与内置组件</a></p></div></div><footer class="page-footer" data-v-a901e69a data-v-79d80dc0><div class="edit" data-v-79d80dc0><div class="edit-link" data-v-79d80dc0 data-v-4e0cf990><!----></div></div><div class="updated" data-v-79d80dc0><p class="last-updated" data-v-79d80dc0 data-v-62bdcaad><span class="prefix" data-v-62bdcaad>上次更新:</span><span class="datetime" data-v-62bdcaad></span></p></div></footer><div class="next-and-prev-link" data-v-a901e69a data-v-6ea49ff3><div class="container" data-v-6ea49ff3><div class="prev" data-v-6ea49ff3><a class="link" href="/swizzle/form-render-vue/advanced/linkage/" data-v-6ea49ff3><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-6ea49ff3><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-6ea49ff3>表单联动</span></a></div><div class="next" data-v-6ea49ff3><a class="link" href="/swizzle/form-render-vue/advanced/methods/" data-v-6ea49ff3><span class="text" data-v-6ea49ff3>表单方法（form）</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-6ea49ff3><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"082d6e6f\",\"en_index.md\":\"7175f189\",\"form-render-vue_faq_index.md\":\"9c63a6f7\",\"form-render-vue_start_index.md\":\"1da57290\",\"parse-chart_start_index.md\":\"b95c137a\",\"en_form-render-vue_faq_index.md\":\"83fc13db\",\"en_form-render-vue_start_index.md\":\"fd19fc3e\",\"en_parse-chart_start_index.md\":\"4f82fe65\",\"form-render-vue_advanced_display_index.md\":\"be02a84d\",\"form-render-vue_advanced_methods_index.md\":\"483234fa\",\"form-render-vue_advanced_linkage_index.md\":\"717c6cec\",\"form-render-vue_advanced_widget_index.md\":\"7f169bf8\",\"form-render-vue_advanced_watch_index.md\":\"5639616a\",\"form-render-vue_agree_inner-widget_index.md\":\"ec7ef77d\",\"form-render-vue_agree_props_index.md\":\"66458975\",\"form-render-vue_agree_rules_index.md\":\"79afc5f1\",\"form-render-vue_agree_schema_index.md\":\"51998246\",\"en_form-render-vue_advanced_display_index.md\":\"04578617\",\"en_form-render-vue_advanced_linkage_index.md\":\"eacadb10\",\"en_form-render-vue_advanced_methods_index.md\":\"e2a74ed1\",\"en_form-render-vue_advanced_watch_index.md\":\"24ec93b5\",\"en_form-render-vue_advanced_widget_index.md\":\"fbd3604c\",\"en_form-render-vue_agree_inner-widget_index.md\":\"e585277a\",\"en_form-render-vue_agree_props_index.md\":\"1917d246\",\"en_form-render-vue_agree_rules_index.md\":\"17cb1f82\",\"en_form-render-vue_agree_schema_index.md\":\"de73168d\"}")</script>
    <script type="module" async src="/swizzle/assets/app.56b881f2.js"></script>
  </body>
</html>